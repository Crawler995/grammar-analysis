(this["webpackJsonpgrammar-analysis"]=this["webpackJsonpgrammar-analysis"]||[]).push([[0],{226:function(e,t,n){e.exports=n(416)},231:function(e,t,n){},416:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(10),o=n.n(l),i=(n(231),n(104)),u=n(105),c=n(136),s=n(131),m=n(425),f=n(426),p=n(429),h=m.a.Paragraph;function d(){return r.a.createElement(f.a,{title:"Grammar Analysis"},r.a.createElement(p.a,{column:3},r.a.createElement(p.a.Item,{label:"Student"},"Qinglong Zhang"),r.a.createElement(p.a.Item,{label:"ID"},"1120172135"),r.a.createElement(p.a.Item,{label:"Class"},"08111702")),r.a.createElement(h,null,"This is the final assignment of class ",r.a.createElement("b",null,"Compilation Principle")," taught by Peng Li, BIT."),r.a.createElement(h,null,"This can compute ",r.a.createElement("b",null,"FIRST(), FOLLOW(), LL(1) / LR(0) / SLR(1) Analysis Table")," according to the given grammar."),r.a.createElement(h,null,r.a.createElement("span",{role:"img","aria-label":""},"\ud83d\ude09")," Visit my"," ",r.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://github.com/Crawler995/grammar-analysis"},"Github")," ","to get more information about this project, such as design / usage documentation."))}var g=n(6),b=n(423),E=n(75),v=n(33),y=n(424),T=n(418),O=n(428),S=n(38),j=n(430),w=n(432),A=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={grammar:{nonTerminals:[],terminals:[],productions:[],startSymbol:""},confirmed:!1},e.mergePrime=function(e){return e.reduce((function(e,t){return"'"===t?e[e.length-1]+="'":e.push(t),e}),[])},e.finishHandler=function(t){var n=t.productions.map((function(t){return{left:e.mergePrime(t.left.split("")),right:t.right.split("|").map((function(t){return"EMPTY"===t?["\u03b5"]:e.mergePrime(t.split(""))}))}})),a=[],r=[];n.forEach((function(e){var t=e.left,n=e.right;a.push.apply(a,Object(g.a)(t.filter((function(e){return/^[A-Z]'?$/.test(e)})))),n.forEach((function(e){return a.push.apply(a,Object(g.a)(e.filter((function(e){return/^[A-Z]'?$/.test(e)}))))})),r.push.apply(r,Object(g.a)(t.filter((function(e){return/^[^A-Z']$/.test(e)})).filter((function(e){return"\u03b5"!==e})))),n.forEach((function(e){return r.push.apply(r,Object(g.a)(e.filter((function(e){return/^[^A-Z']$/.test(e)})).filter((function(e){return"\u03b5"!==e}))))}))}));var l={nonTerminals:Object(g.a)(new Set(a)),terminals:Object(g.a)(new Set(r)),productions:n,startSymbol:a[0]};e.props.onConfirm(),e.setState({grammar:l,confirmed:!0})},e.startComputeHandler=function(){e.props.onStartCompute(e.state.grammar)},e.inputHandler=function(){e.props.onInput(),e.setState({confirmed:!1})},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return console.log("render"),r.a.createElement(b.a,{title:"Input Grammar:"},r.a.createElement(E.a,{gutter:24},r.a.createElement(v.a,{span:12},r.a.createElement(y.a,{name:"grammar",onFinish:this.finishHandler,autoComplete:"off"},r.a.createElement(y.a.List,{name:"productions"},(function(t,n){var a=n.add,l=n.remove;return r.a.createElement("div",null,t.map((function(t){return r.a.createElement(T.a,{key:t.key,style:{display:"flex"},align:"start"},r.a.createElement(y.a.Item,Object.assign({},t,{name:[t.name,"left"],fieldKey:[t.fieldKey,"left"],rules:[{required:!0,message:"Missing left part of production!"}]}),r.a.createElement(O.a,{placeholder:"left",onChange:e.inputHandler})),r.a.createElement("span",{style:{fontSize:"18px"}},"->"),r.a.createElement(y.a.Item,Object.assign({},t,{name:[t.name,"right"],fieldKey:[t.fieldKey,"right"],rules:[{required:!0,message:"Missing right part of production!"}]}),r.a.createElement(O.a,{placeholder:"right",onChange:e.inputHandler})),r.a.createElement(j.a,{style:{marginTop:"4px",fontSize:"24px"},onClick:function(){l(t.name)}}))})),r.a.createElement(y.a.Item,null,r.a.createElement(S.a,{type:"dashed",onClick:function(){a()},block:!0},r.a.createElement(w.a,null)," Add new production")))})),r.a.createElement(y.a.Item,null,r.a.createElement(S.a,{type:"primary",htmlType:"submit"},"Confirm && Preview Grammar")),r.a.createElement(y.a.Item,null,r.a.createElement(S.a,{type:"primary",htmlType:"button",onClick:this.startComputeHandler,disabled:!this.state.confirmed},"Start to Compute!")))),r.a.createElement(v.a,{span:12},r.a.createElement(b.a,{type:"inner",title:"Current Grammar Preview",style:{marginBottom:"10px"}},"G = ( VN, VT, S, P )",r.a.createElement("br",null),"VN = ","{ ".concat(this.state.grammar.nonTerminals.join(", ")," }"),r.a.createElement("br",null),"VT = ","{ ".concat(this.state.grammar.terminals.join(", ")," }"),r.a.createElement("br",null),"S = ",this.state.grammar.startSymbol,r.a.createElement("br",null),"P ="," ","{ ".concat(this.state.grammar.productions.map((function(e){return"".concat(e.left.join("")," -> ").concat(e.right.map((function(e){return e.join("")})).join("|"))})).join(", ")," }")),r.a.createElement(m.a,null,r.a.createElement(m.a.Paragraph,null,"Noticed: ",r.a.createElement("br",null),"1. The /^[A-Z]'?$/ will be regarded as non-terminal and the /^[^A-Z']$/ will be regarded as terminal;",r.a.createElement("br",null),"2. The first appeared non-terminal will be regarded as the start symbol;",r.a.createElement("br",null),"3. ",r.a.createElement("b",null,'You should "Confirm && Preview Grammar" before "Start to Compute"!')),r.a.createElement(m.a.Paragraph,null,"e.g.",r.a.createElement("br",null),"A' -> B'a|c|".concat("\u03b5",", B' -> d"),r.a.createElement("br",null),'For the first production you can input "A\'" in left and input "B\'a|c|EMPTY" in right. ',r.a.createElement("br",null),"The non-terminals will be [A', B'], the terminals will be [a, b, c, d], the start symbol will be A'.")))))}}]),n}(r.a.PureComponent),k=n(198),C=n(420),x=n(421),F=n(422);function P(e){return r.a.createElement(b.a,{title:"FIRST() && FOLLOW()",style:{marginTop:"20px"}},r.a.createElement(F.a,{columns:[{title:"X",dataIndex:"symbols",key:"symbols"},{title:"FIRST(X)",dataIndex:"firstSet",key:"firstSet"},{title:"FOLLOW(X)",dataIndex:"followSet",key:"followSet"}],dataSource:e.data,pagination:!1}))}function I(e){return r.a.createElement(b.a,{title:"LL(1) Analysis Table",style:{marginTop:"20px"}},function(){var t=e.table;if(void 0===t)return r.a.createElement(m.a.Paragraph,null,"Wait...");if(null===t)return r.a.createElement(m.a.Paragraph,null,"This grammar is not a LL(1) grammar!");var n=r.a.createElement("tr",null,r.a.createElement("td",{className:"custom-table-header"}),t.columns.map((function(e,t){return r.a.createElement("td",{className:"custom-table-header",key:t},r.a.createElement("b",null,e))}))),a=t.relationships.map((function(e,n){return r.a.createElement("tr",{key:n},r.a.createElement("td",{className:"custom-table-header"},r.a.createElement("b",null,t.rows[n])),e.map((function(e,t){return r.a.createElement("td",{key:t},null===e?"":"".concat(e.left," -> ").concat(e.right.map((function(e){return e.join("")})).join("|")))})))}));return r.a.createElement("table",{className:"custom-table",cellPadding:20},r.a.createElement("tbody",null,n,a))}())}var N=function e(t,n){var a;if(t===n)return!0;if("function"===typeof t||"string"===typeof t||t instanceof String)return t.toString()===n.toString();if(t instanceof Number||"number"===typeof t)return(n instanceof Number||"number"===typeof n)&&t.valueOf()===n.valueOf();if(typeof t!==typeof n||null===n||"undefined"===typeof n)return!1;function r(e){var t={};return"object"!==typeof e?e:(Object.keys(e).sort().forEach((function(n){t[n]=r(e[n])})),t)}if("object"===typeof t){if(Array.isArray(t))return JSON.stringify(t)===JSON.stringify(n);for(a in t){if(typeof t[a]!==typeof n[a])return!1;if(null===t[a]!==(null===n[a]))return!1;switch(typeof t[a]){case"undefined":if("undefined"!==typeof n[a])return!1;break;case"object":if(null!==t[a]&&null!==n[a]&&(t[a].constructor.toString()!==n[a].constructor.toString()||!e(t[a],n[a])))return!1;break;case"function":if(t[a].toString()!==n[a].toString())return!1;break;default:if(t[a]!==n[a])return!1}}}return JSON.stringify(r(t))===JSON.stringify(r(n))},R=n(127),L=function(e,t){var n=function(e){return e.left+e.pointPos+e.right.join("")},a=n(e),r=n(t);return a<r?-1:a===r?0:1},H=function(e){return e.slice(0).sort((function(e,t){return L(e,t)}))};function D(e){var t=Object(a.useRef)(null);Object(a.useEffect)((function(){var n=e.table;if(void 0!==n&&null!==n){var a=n.states.map((function(e,t){return{id:e,label:t+"\n"+n.depDFA.statuses[t].map((function(e){var t=e.right.slice(0);return t.splice(e.pointPos,0,"\xb7"),"".concat(e.left," -> ").concat(t.join(""))})).join("\n"),shape:"box"}})),r=n.depDFA.transformFunctions.map((function(e,t){var a=e.from,r=e.input,l=e.to;return{from:n.depDFA.statuses.findIndex((function(e){return N(H(e),H(a))})),to:n.depDFA.statuses.findIndex((function(e){return N(H(e),H(l))})),label:r,arrows:{to:!0}}}));setTimeout((function(){new R.Network(t.current,{nodes:a,edges:r},{height:"".concat(Math.max(62*n.depDFA.statuses.length,400),"px")})}),100)}}),[e,e.table]);return r.a.createElement(b.a,{title:"LR(0) Analysis Table",style:{marginTop:"20px"}},r.a.createElement(E.a,{gutter:24},r.a.createElement(v.a,{span:9},function(){var t=e.table;if(void 0===t)return r.a.createElement(m.a.Paragraph,null,"Wait...");if(null===t)return r.a.createElement(m.a.Paragraph,null,"This grammar is not a LR(0) grammar!");var n=r.a.createElement("tr",null,r.a.createElement("td",{className:"custom-table-header"}),r.a.createElement("td",{className:"custom-table-header",colSpan:t.actionColumns.length},r.a.createElement("b",null,"ACTION")),r.a.createElement("td",{className:"custom-table-header",colSpan:t.gotoColumns.length},r.a.createElement("b",null,"GOTO"))),a=r.a.createElement("tr",null,r.a.createElement("td",{className:"custom-table-header"}),t.actionColumns.map((function(e,t){return r.a.createElement("td",{key:t,className:"custom-table-header"},r.a.createElement("b",null,e))})),t.gotoColumns.map((function(e,t){return r.a.createElement("td",{key:t,className:"custom-table-header"},r.a.createElement("b",null,e))}))),l=r.a.createElement(r.a.Fragment,null,t.states.map((function(e,n){return r.a.createElement("tr",{key:n},r.a.createElement("td",{className:"custom-table-header"},r.a.createElement("b",null,e)),t.actionTable[n].map((function(e,t){return r.a.createElement("td",{key:t},null!==e&&void 0!==e?e:"")})),t.gotoTable[n].map((function(e,t){return r.a.createElement("td",{key:t},null!==e&&void 0!==e?e:"")})))})));return r.a.createElement("table",{className:"custom-table",cellPadding:20},r.a.createElement("tbody",null,n,a,l))}()),r.a.createElement(v.a,{span:15},r.a.createElement(b.a,{type:"inner",title:"DFA Graph"},r.a.createElement("div",{ref:t})))))}function G(e){var t=Object(a.useRef)(null);Object(a.useEffect)((function(){var n=e.table;if(void 0!==n&&null!==n){var a=n.states.map((function(e,t){return{id:e,label:t+"\n"+n.depDFA.statuses[t].map((function(e){var t=e.right.slice(0);return t.splice(e.pointPos,0,"\xb7"),"".concat(e.left," -> ").concat(t.join(""))})).join("\n"),shape:"box"}})),r=n.depDFA.transformFunctions.map((function(e,t){var a=e.from,r=e.input,l=e.to;return{from:n.depDFA.statuses.findIndex((function(e){return N(H(e),H(a))})),to:n.depDFA.statuses.findIndex((function(e){return N(H(e),H(l))})),label:r,arrows:{to:!0}}}));setTimeout((function(){new R.Network(t.current,{nodes:a,edges:r},{height:"".concat(Math.max(62*n.depDFA.statuses.length,400),"px")})}),100)}}),[e,e.table]);return r.a.createElement(b.a,{title:"SLR(1) Analysis Table",style:{marginTop:"20px"}},r.a.createElement(E.a,{gutter:24},r.a.createElement(v.a,{span:9},function(){var t=e.table;if(void 0===t)return r.a.createElement(m.a.Paragraph,null,"Wait...");if(null===t)return r.a.createElement(m.a.Paragraph,null,"This grammar is not a SLR(1) grammar!");var n=r.a.createElement("tr",null,r.a.createElement("td",{className:"custom-table-header"}),r.a.createElement("td",{className:"custom-table-header",colSpan:t.actionColumns.length},r.a.createElement("b",null,"ACTION")),r.a.createElement("td",{className:"custom-table-header",colSpan:t.gotoColumns.length},r.a.createElement("b",null,"GOTO"))),a=r.a.createElement("tr",null,r.a.createElement("td",{className:"custom-table-header"}),t.actionColumns.map((function(e,t){return r.a.createElement("td",{key:t,className:"custom-table-header"},r.a.createElement("b",null,e))})),t.gotoColumns.map((function(e,t){return r.a.createElement("td",{key:t,className:"custom-table-header"},r.a.createElement("b",null,e))}))),l=r.a.createElement(r.a.Fragment,null,t.states.map((function(e,n){return r.a.createElement("tr",{key:n},r.a.createElement("td",{className:"custom-table-header"},r.a.createElement("b",null,e)),t.actionTable[n].map((function(e,t){return r.a.createElement("td",{key:t},null!==e&&void 0!==e?e:"")})),t.gotoTable[n].map((function(e,t){return r.a.createElement("td",{key:t},null!==e&&void 0!==e?e:"")})))})));return r.a.createElement("table",{className:"custom-table",cellPadding:20},r.a.createElement("tbody",null,n,a,l))}()),r.a.createElement(v.a,{span:15},r.a.createElement(b.a,{type:"inner",title:"DFA Graph"},r.a.createElement("div",{ref:t})))))}var W=n(431),B=n(427);function Z(e){return r.a.createElement(W.a,{offsetTop:250},r.a.createElement(B.a,{direction:"vertical",size:"small"},["Input Grammar","FIRST() & FOLLOW()","LL(1)","LR(0)","SLR(1)","Summary"].map((function(t,n){return r.a.createElement(B.a.Step,{key:t,title:t,status:void 0===e.statues[n]?void 0:e.statues[n]?"finish":"error"})}))))}var $,J=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(e.length!==t.length)return!1;n&&(e=e.slice(0).sort(),t=t.slice(0).sort());for(var a=0;a<e.length;a++)if(e[a]!==t[a])return!1;return!0},M=function(e,t){for(var n=e.productions,a=[],r=0;r<n.length;r++){var l=n[r];J(l.left,t)&&a.push.apply(a,Object(g.a)(l.right))}return a},V=function(e,t){if(1===t.length&&"\u03b5"===t[0])return!0;var n=e.nonTerminals,a=e.terminals;return t.reduce((function(e,t){return e&&(n.includes(t)||a.includes(t))}),!0)},Y=function(e,t){var n=[];return e.forEach((function(e){t.forEach((function(t){e===t&&n.push(e)}))})),n},K=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(a.includes(n))return!1;if("\u03b5"===n)return!0;if(t.nonTerminals.includes(n)){for(var r=M(t,[n]),l=0;l<r.length;l++){var o=r[l];if(1===o.length&&"\u03b5"===o[0])return!0;if(0===Y(o,t.terminals).length){var i=o.reduce((function(r,l){return r&&e(t,l,[].concat(Object(g.a)(a),[n]))}),!0);if(i)return!0}}return!1}return t.terminals.includes(n),!1},z=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!V(t,n))throw new Error("The argument must be included by the non-terminal set or terminal set of the given grammar.");if(1===n.length){var r=n[0];if(t.terminals.includes(r)||"\u03b5"===r)return[r];var l=M(t,n),o=[];return a.push(r),l.forEach((function(n){r!==n[0]?a.includes(n[0])?void 0!==M(t,[n[0]]).find((function(e){return 1===e.length&&"\u03b5"===e[0]}))&&o.push.apply(o,Object(g.a)(e(t,n.slice(1),a))):o.push.apply(o,Object(g.a)(e(t,n,a))):void 0!==l.find((function(e){return 1===e.length&&"\u03b5"===e[0]}))&&o.push.apply(o,Object(g.a)(e(t,n.slice(1),a)))})),a.pop(),Object(g.a)(new Set(o)).sort()}for(var i=!0,u=!0,c=[],s=0;s<n.length;s++){if(!i){u=!1;break}var m=e(t,[n[s]],a),f=m.filter((function(e){return"\u03b5"!==e}));c.push.apply(c,Object(g.a)(f)),i=K(t,n[s])}return i||(u=!1),u&&c.push("\u03b5"),Object(g.a)(new Set(c)).sort()},X=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(!V(t,[n]))throw new Error("The argument must be included by the non-terminal set or terminal set of the given grammar.");var r=[];return a.includes(n)?r:(n===t.startSymbol&&r.push("#"),t.productions.forEach((function(l,o){var i=l.left;l.right.forEach((function(l,o){for(var u=[],c=l.slice(0),s=0;;){var m=c.indexOf(n);if(-1===m)break;u.push(m+s),c=c.slice(m+1),s+=m+1}u.forEach((function(o){if(o>-1){var u=e(t,i[0],[].concat(Object(g.a)(a),[n]));o===l.length-1&&r.push.apply(r,Object(g.a)(u));var c=z(t,l.slice(o+1));r.push.apply(r,Object(g.a)(c.filter((function(e){return"\u03b5"!==e})))),c.includes("\u03b5")&&r.push.apply(r,Object(g.a)(u))}}))}))})),Object(g.a)(new Set(r)).sort())},q=function(e){var t=e.nonTerminals,n=e.productions,a=[];return a.push.apply(a,Object(g.a)(t.map((function(t){var n=z(e,[t]),a=X(e,t);return{key:t,symbols:t,firstSet:"{ ".concat(n.join(", ")," }"),followSet:"{ ".concat(a.join(", ")," }")}})))),n.forEach((function(t){var n=[];t.right.forEach((function(t){var a=z(e,t);n.push({key:t.join(""),symbols:t.join(""),firstSet:"{ ".concat(a.join(", ")," }"),followSet:""})})),a.push.apply(a,n)})),a.reduce((function(e,t){return-1===e.findIndex((function(e){return e.symbols===t.symbols}))?e.concat(t):e}),[])},Q=n(140);!function(e){e[e.OTHER=0]="OTHER",e[e.TWO=1]="TWO",e[e.THREE=2]="THREE"}($||($={}));var _=$,U=function(e){var t,n=e.productions,a=void 0,r=Object(Q.a)(n);try{for(r.s();!(t=r.n()).done;){var l=t.value,o=l.left,i=l.right;if(1!==o.length)return!1;var u,c=Object(Q.a)(i);try{for(c.s();!(u=c.n()).done;){var s=u.value,m=ee(e,s);if("none"===m)return!1;if("uncertain"!==m)if(void 0===a)a=m;else if(a!==m)return!1}}catch(f){c.e(f)}finally{c.f()}return!0}}catch(f){r.e(f)}finally{r.f()}},ee=function(e,t){if(t.length>2)return"none";var n=e.terminals,a=e.nonTerminals;if(1===t.length)return n.includes(t[0])||"\u03b5"===t[0]?"uncertain":"none";if(2===t.length){if(a.includes(t[0])&&(n.includes(t[1])||"\u03b5"===t[1]))return"left";if((n.includes(t[0])||"\u03b5"===t[0])&&a.includes(t[1]))return"right"}return"none"},te=function(e){var t,n=e.productions,a=e.nonTerminals,r=Object(Q.a)(n);try{for(r.s();!(t=r.n()).done;){var l=t.value.left;if(1!==l.length)return!1;if(!a.includes(l[0]))return!1}}catch(o){r.e(o)}finally{r.f()}return!0},ne=function(e){return U(e)?_.THREE:te(e)?_.TWO:_.OTHER},ae=function(e){for(var t=0;t<e.length-1;t++)for(var n=e[t],a=t+1;a<e.length;a++){var r=e[a];if(0!==Y(n,r).length)return!0}return!1},re=function(e){if(ne(e)===_.OTHER)return null;var t={rows:Object(g.a)(e.nonTerminals),columns:[].concat(Object(g.a)(e.terminals),["#"]),relationships:[]};t.relationships=new Array(e.nonTerminals.length);for(var n=0;n<t.relationships.length;n++)t.relationships[n]=new Array(e.terminals.length+1).fill(null);for(var a=0;a<e.productions.length;a++)for(var r=e.productions[a],l=r.left,o=r.right,i=[],u=t.rows.indexOf(l[0]),c=0;c<o.length;c++){var s=o[c],m=z(e,s);if(i.push(m),ae(i))return null;for(var f=m.includes("\u03b5"),p=0;p<m.length;p++){var h=m[p];if("\u03b5"!==h){var d=t.columns.indexOf(h);if(null!==t.relationships[u][d])return null;t.relationships[u][d]={left:l,right:[s]}}}if(f)for(var b=X(e,l[0]),E=0;E<b.length;E++){var v=b[E],y=t.columns.indexOf(v);if(null!==t.relationships[u][y])return null;t.relationships[u][y]={left:l,right:[s]}}}return t},le=function(e){return"S".concat(e)},oe=function(e){return"r".concat(e)},ie=function(e){var t={inputs:[].concat(Object(g.a)(e.terminals),Object(g.a)(e.nonTerminals)),statuses:[],startStatus:{left:e.startSymbol,right:M(e,[e.startSymbol])[0],pointPos:0},acceptedStatuses:[],transformFunctions:[]};return e.productions.forEach((function(e){var n=e.left;e.right.forEach((function(e){for(var a=0;a<e.length;a++){if(1===e.length&&"\u03b5"===e[0]){var r={left:n[0],right:[],pointPos:0};t.statuses.push(r),t.acceptedStatuses.push(r);break}var l={left:n[0],right:e,pointPos:a},o={left:n[0],right:e,pointPos:a+1};t.statuses.push(l),a===e.length-1&&(t.statuses.push(o),t.acceptedStatuses.push(o)),t.transformFunctions.push({from:l,to:o,input:e[a]})}}))})),t.transformFunctions.forEach((function(n){var a=n.from.right[n.from.pointPos];e.nonTerminals.includes(a)&&t.statuses.forEach((function(e){e.left===a&&0===e.pointPos&&t.transformFunctions.push({from:n.from,to:e,input:"\u03b5"})}))})),t};var ue=function e(t){if(null===t||"object"!==typeof t)return t;var n=Array.isArray(t)?[]:{};return Object.keys(t).forEach((function(a){return n[a]=e(t[a])})),n},ce=function(e,t){for(var n=e.transformFunctions,a=Object(g.a)(t),r=a.length;a.forEach((function(e){n.forEach((function(t){N(t.from,e)&&"\u03b5"===t.input&&(a.reduce((function(e,n){return e||N(n,t.to)}),!1)||a.push(ue(t.to)))}))})),a.length!==r;)r=a.length;return a},se=function(e,t,n){var a=ce(e,t),r=e.transformFunctions,l=[];a.forEach((function(e){r.forEach((function(t){N(t.from,e)&&t.input===n&&(l.reduce((function(e,n){return e||N(n,t.to)}),!1)||l.push(ue(t.to)))}))}));var o=[];return l.forEach((function(t){o.push.apply(o,Object(g.a)(ce(e,[t])))})),o},me=function(e){for(var t={rows:[ce(e,[e.startStatus])],columns:Object(g.a)(new Set(e.transformFunctions.map((function(e){return e.input})).filter((function(e){return"\u03b5"!==e})))),relationships:[]},n=[],a=0,r=function(){var r=t.rows[a],l=[];if(t.columns.forEach((function(a){var o=se(e,r,a);l.push(0===o.length?null:o),0===o.length||t.rows.reduce((function(e,t){return e||N(H(t),H(o))}),!1)||(t.rows.push(o),e.acceptedStatuses.reduce((function(e,t){return e||void 0!==o.find((function(e){return N(e,t)}))}),!1)&&n.push(o))})),t.relationships.push(l),++a===t.rows.length)return"break"};;){if("break"===r())break}var l={inputs:e.inputs,statuses:t.rows,startStatus:t.rows[0],acceptedStatuses:n,transformFunctions:[]},o=t.relationships;return t.rows.forEach((function(e,n){t.columns.forEach((function(t,a){null!==o[n][a]&&l.transformFunctions.push({from:e,to:o[n][a],input:t})}))})),l},fe=function(e){if(ne(e)===_.OTHER)return null;var t=ie(e),n=me(t),a={states:new Array(n.statuses.length).fill(0).map((function(e,t){return t})),actionColumns:[].concat(Object(g.a)(e.terminals),["#"]),gotoColumns:Object(g.a)(e.nonTerminals.filter((function(t){return t!==e.startSymbol}))),actionTable:[],gotoTable:[],depDFA:n};a.actionTable=new Array(a.states.length);for(var r=0;r<a.states.length;r++)a.actionTable[r]=new Array(e.terminals.length+1).fill(null);a.gotoTable=new Array(a.states.length);for(var l=0;l<a.states.length;l++)a.gotoTable[l]=new Array(e.nonTerminals.length-1).fill(null);for(var o=n.transformFunctions,i=n.statuses,u=function(t){var n=o[t],r=n.from,l=n.to,u=n.input,c=i.findIndex((function(e){return N(H(e),H(r))})),s=i.findIndex((function(e){return N(H(e),H(l))}));if(e.terminals.includes(u)){var m=a.actionColumns.indexOf(u);a.actionTable[c][m]=le(s)}else{var f=a.gotoColumns.indexOf(u);a.gotoTable[c][f]=s}},c=0;c<o.length;c++)u(c);for(var s=n.acceptedStatuses,m=function(t){var n=s[t],r=i.findIndex((function(e){return N(H(e),H(n))})),l=n.filter((function(e){return e.pointPos===e.right.length}));if(l.length>1)return{v:null};if(1===l.length)if(l[0].left===e.startSymbol)a.actionTable[r][a.actionColumns.length-1]="acc";else for(var o=0,u=0;u<e.productions.length;u++){var c=e.productions[u];if(c.left[0]===l[0].left)for(var m=0;m<c.right.length;m++){if(c.right[m].join("")===l[0].right.join(""))for(var f=0;f<a.actionColumns.length;f++){if(null!==a.actionTable[r][f])return{v:null};a.actionTable[r][f]=oe(o+m)}}o+=c.right.length}},f=0;f<s.length;f++){var p=m(f);if("object"===typeof p)return p.v}return a},pe=function(e){if(ne(e)===_.OTHER)return null;var t=ie(e),n=me(t),a={states:new Array(n.statuses.length).fill(0).map((function(e,t){return t})),actionColumns:[].concat(Object(g.a)(e.terminals),["#"]),gotoColumns:Object(g.a)(e.nonTerminals.filter((function(t){return t!==e.startSymbol}))),actionTable:[],gotoTable:[],depDFA:n};a.actionTable=new Array(a.states.length);for(var r=0;r<a.states.length;r++)a.actionTable[r]=new Array(e.terminals.length+1).fill(null);a.gotoTable=new Array(a.states.length);for(var l=0;l<a.states.length;l++)a.gotoTable[l]=new Array(e.nonTerminals.length-1).fill(null);for(var o=n.transformFunctions,i=n.statuses,u=function(t){var n=o[t],r=n.from,l=n.to,u=n.input,c=i.findIndex((function(e){return N(H(e),H(r))})),s=i.findIndex((function(e){return N(H(e),H(l))}));if(e.terminals.includes(u)){var m=a.actionColumns.indexOf(u);a.actionTable[c][m]=le(s)}else{var f=a.gotoColumns.indexOf(u);a.gotoTable[c][f]=s}},c=0;c<o.length;c++)u(c);for(var s=n.acceptedStatuses,m=function(t){var n=s[t],r=i.findIndex((function(e){return N(H(e),H(n))})),l=n.filter((function(e){return e.pointPos===e.right.length}));if(l.length>1)return{v:null};if(1===l.length)if(l[0].left===e.startSymbol)a.actionTable[r][a.actionColumns.length-1]="acc";else for(var o=0,u=0;u<e.productions.length;u++){var c=e.productions[u];if(c.left[0]===l[0].left)for(var m=0;m<c.right.length;m++){if(c.right[m].join("")===l[0].right.join(""))for(var f=X(e,c.left[0]).map((function(e){return a.actionColumns.indexOf(e)})),p=0;p<f.length;p++){var h=f[p];if(null!==a.actionTable[r][h])return{v:null};a.actionTable[r][h]=oe(o+m)}}o+=c.right.length}},f=0;f<s.length;f++){var p=m(f);if("object"===typeof p)return p.v}return a};function he(e){return r.a.createElement(b.a,{title:"Summary",style:{marginTop:"20px"}},r.a.createElement(m.a,null,null===e.grammarTypes?r.a.createElement(m.a.Paragraph,null,"Wait..."):r.a.createElement(r.a.Fragment,null,0===e.grammarTypes.length?r.a.createElement(m.a.Paragraph,null,r.a.createElement("b",null,"This grammar isn't any grammar above!")):r.a.createElement(m.a.Paragraph,null,r.a.createElement("b",null,"This grammar is a ".concat(e.grammarTypes.join(", ")," grammar."))),r.a.createElement(m.a.Paragraph,null,'You can click the button "\u2191" in the right bottom to go back to top.'))))}var de=n(419).a.Footer;function ge(){return r.a.createElement(de,{style:{textAlign:"center"}},r.a.createElement("span",{role:"img","aria-label":""},"\ud83d\ude80 Developed by Qinglong Zhang",r.a.createElement("br",null)))}var be=function(e){Object(c.a)(n,e);var t=Object(s.a)(n);function n(){var e;Object(i.a)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={stepsStatus:new Array(6).fill(void 0),computeRes:{firstAndFollowSet:[],ll1AnalysisTable:void 0,lr0AnalysisTable:void 0,slr1AnalysisTable:void 0}},e.startComputeHandler=function(t){var n=q(t),a=re(t),r=fe(t),l=pe(t);e.setState({computeRes:{firstAndFollowSet:n,ll1AnalysisTable:a,lr0AnalysisTable:r,slr1AnalysisTable:l},stepsStatus:[!0,!0,null!==a,null!==r,null!==l,!0]}),k.a.info("All computations have finished!")},e.getGrammarTypes=function(){var t=e.state.stepsStatus;if(void 0===t[2])return null;var n=t.slice(2,5);return["LL(1)","LR(0)","SLR(1)"].filter((function(e,t){return n[t]}))},e.confirmHandler=function(){k.a.success("You've confirm the grammar, now you can start to compute!"),e.setState({stepsStatus:[!0].concat(new Array(5).fill(void 0))})},e.inputHandler=function(){e.setState({stepsStatus:new Array(6).fill(void 0)})},e}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(d,null),r.a.createElement(C.a,null),r.a.createElement(E.a,null,r.a.createElement(v.a,{span:20},r.a.createElement("main",{style:{padding:"0px 50px 50px 50px"}},r.a.createElement(A,{onStartCompute:this.startComputeHandler,onInput:this.inputHandler,onConfirm:this.confirmHandler}),r.a.createElement(P,{data:this.state.computeRes.firstAndFollowSet}),r.a.createElement(I,{table:this.state.computeRes.ll1AnalysisTable}),r.a.createElement(D,{table:this.state.computeRes.lr0AnalysisTable}),r.a.createElement(G,{table:this.state.computeRes.slr1AnalysisTable}),r.a.createElement(he,{grammarTypes:this.getGrammarTypes()}))),r.a.createElement(v.a,{span:4},r.a.createElement(Z,{statues:this.state.stepsStatus}))),r.a.createElement(ge,null),r.a.createElement(x.a,null))}}]),n}(r.a.Component);var Ee=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(be,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[226,1,2]]]);
//# sourceMappingURL=main.76bdc08f.chunk.js.map